---
const navItems = [
  { name: "Inicio", href: "/" },
  { name: "Servicios", href: "/#servicios" },
  { name: "Calculadora", href: "/#calculadora" },
  { name: "Blog", href: "/#blog" },
  { name: "Recetas", href: "/#recetas" },
  { name: "Contacto", href: "/#contacto" },
];
---

<header class="sticky top-0 z-50 bg-white shadow-sm">
  <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <div class="flex items-center gap-2">
        <svg
          class="h-8 w-8 text-primary"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
        <span class="text-xl font-bold text-gray-900">FitVeg</span>
      </div>

      <div class="hidden md:block">
        <div class="flex items-center gap-6">
          {
            navItems.map((item) => (
              <a
                href={item.href}
                class="text-sm font-medium text-gray-700 transition-colors hover:text-primary"
              >
                {item.name}
              </a>
            ))
          }
        </div>
      </div>

      <button class="md:hidden" aria-label="Menú">
        <svg
          class="h-6 w-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </nav>
  <script>
    // Solo se ejecuta en el cliente
    document.addEventListener("DOMContentLoaded", () => {
      const handleNavigation = (event) => {
        const link = event.currentTarget;
        const href = link.getAttribute("href");

        // Si el enlace es a una sección de la misma página
        if (href.startsWith("#") && window.location.pathname === "/") {
          event.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({ behavior: "smooth" });
          }
        }
        // Si el enlace es a la página principal con ancla
        else if (href.startsWith("/#") && window.location.pathname === "/") {
          event.preventDefault();
          const hash = href.split("#")[1];
          const target = document.querySelector(`#${hash}`);
          if (target) {
            target.scrollIntoView({ behavior: "smooth" });
          }
        }
        // Para otros casos, dejar que el navegador maneje normalmente
      };

      // Aplicar a todos los enlaces del header
      const navLinks = document.querySelectorAll("header nav a");
      navLinks.forEach((link) => {
        link.addEventListener("click", handleNavigation);
      });
    });
  </script>
</header>
